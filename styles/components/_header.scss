@use "sass:color";
@use "../utils/variables" as *;
@use "../utils/mixins" as *;

/* Skip link : totalement caché sauf au focus */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px; height: 1px; overflow: hidden;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  white-space: nowrap;
}
.skip-link:focus {
  position: fixed;
  left: 1rem; top: 1rem;
  width: auto; height: auto; overflow: visible;
  clip: auto; clip-path: none; white-space: normal;
  padding: .5rem .75rem;
  background: #000; color: #fff;
  z-index: 2000;
  border-radius: .25rem;
}

/* Header (desktop/tablette par défaut) */
.site-header {
  z-index: 1100;
  background: #fff;
  width: 100%;
  margin: 0 auto;
  padding: 1rem 2rem 0.5rem;
  box-shadow: $shadow-defaut;
  position: static;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding-left: 10rem; /* version desktop */
  padding-right: 5rem; /* version desktop */
}

.site-header .brand {
  display: inline-flex;
  align-items: center;
  gap: .6rem;
  flex: 0 1 auto;
}

.site-header .brand .brand-logo {
  display: inline-block;
  height: clamp(64px, 8vw, 80px);
  aspect-ratio: 833 / 301;
  background-color: $vert2;
  -webkit-mask: url('../images/logo_cpe/logo_cpe_blanc.png') no-repeat center / contain;
          mask: url('../images/logo_cpe/logo_cpe_blanc.png') no-repeat center / contain;
  font-size: 0;
  color: transparent;
  line-height: 0;
}

@supports not (mask: url()) {
  .site-header .brand .brand-logo {
    width: clamp(120px, 30vw, 270px);
    background: url('../images/logo_cpe/logo_cpe_blanc.png') no-repeat center / contain;
    background-color: transparent;
  }
}

/* Desktop sticky si souhaité */
@media (min-width: 768px) {
  .site-header { position: sticky; top: 0; }
}

@media (max-width: 1024px) {
  .site-header {
    padding-left: 4rem;
    padding-right: 4rem;
  }
}

/* ===== Mobile uniquement (≤ 767px) ===== */
@media (max-width: 767px) {
  .site-header {
    padding-left: 1rem;            /* padding gauche classique */
    padding-right: 1rem;
    gap: .6rem;

    /* Empilement: logo au-dessus, puis les 2 boutons */
    display: grid;
    grid-template-columns: 1fr;
    grid-template-areas:
      "brand"
      "btn1"
      "btn2";
    row-gap: .5rem;
    justify-items: center;         /* centrage propre */
    align-items: center;
  }

  /* Mapping selon ton HTML: btn — brand — btn */
  .site-header > a.brand { grid-area: brand; }
  .site-header > a.btn:first-of-type { grid-area: btn1; }
  .site-header > a.btn:last-of-type  { grid-area: btn2; }

  /* Sécurité anti-débordement */
  .site-header > a.btn { max-width: 100%; }
}
